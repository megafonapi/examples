Примеры использования МегаФон.API на Python
-------------------------------------------

Примеры являются консольными приложениями, принимающими логин/пароль или токен первыми аргументами в командной строке + дополнительные аргументы:

```
$ ./incoming.py <login> <password> [ ... additional arguments ... ]
$ ./incoming.py <token> [ ... additional arguments ... ]
```

Примеры демонстрируют следующую функциональность:

* **call_list.py** - принимает дополнительным аргументом имя файла со списком телефонных номеров в международном формате (в один столбик) и последовательно их обзванивает, проигрывая голосовое сообщение и ожидая завершения звонка. После этого продолжает дальше звонить по списку.

* **trombone.py** - принимает дополнительными аргиментами ДВА телефонных номера, звонит каждому и объединяет оба звонка в один голосовой тракт. Параллельно идет запись вызова в файл.

* **conference.py** - принимает дополнительными аргументом имя текстового файла со списком телефонных номеров, делает вызовы на каждый и последовательно их объединяет в голосовую конференцию. По каждому из номеров во время вызова осуществляется проигрывание приглашения и ожидания согласия (получения DTMF) на вход в конференцию. Параллельно идет отслеживание состояния конференции (количество участников, время входа/выхода и т.п.). Все операции вызовов происходя в асинхронном режиме, с использованием возможностей пакета `asincio`.

* **incoming.py** - принимает дополнительным аргументом номер телефона и ожидает входящего вызова. При поступлении такого вызова, осуществляется второй исходящий вызов на указанный в командной строке номер и, по получении от обоих абонентов согласия (обработка DTMF), объединяет два плеча в один (осуществляет "тромбон" вызова).

* **send_sms.py** - принимает дополнительным аргументом текстовый файл со списком номеров и осуществляет по ним рассылку flash-сообщения.

Во всех примерах используется современная асинхронная реализация JSON-RPC/WebSocket - [jsonrpc-websocket](https://github.com/armills/jsonrpc-websocket). **ВАЖНО!** Пакет `jsonrpc_websocket` не передает(!) разработчику `id` исходного запроса (но возвращает его в случае ошибки). Обход этого — вложенные `try`-блоки, несколько `try`-блоков, хак в самом `jsonrpc_websocket`.

